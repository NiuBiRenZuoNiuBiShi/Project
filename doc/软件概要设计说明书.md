# 软件概要设计说明书

>1. 《软件概要设计说明书》(SDD)概要设计说明书又可称系统设计说明书，这里所说的系统是指程序系统。编制的目的是说明对程序 系统的设计考虑，包括程序系统的基本处理流程、程序系统的组织结构、模块划分、功能分配、接口设计、运行设计、安全设计、数据结构设计和出错处理设计等，为程序的详细设计提供基础。
>2. 本课程及本实验不涉及、不强调、不关注的部分可省略，但不允许删除已有条目。
>3. 最终文档请删除所有灰色字体和斜体等说明部分。

[Toc]

## 1 引言

### 1.1 编写目的

*说明编写这份概要设计说明书的目的，指出预期的读者。*

### 1.2 背景

*说明：*

*a．待开发软件系统的名称；*

*b．列出此项目的任务提出者、开发者、用户以及将运行该软件的计算站（中心）。*

### 1.3 定义

*列出本文件中用到的专门术语的定义和外文首字母组词的原词组。*

### 1.4参考设计

*列出有关的参考文件*

## 2 系统需求概述

### 2.1需求规定

*说明对本系统的主要的输入输出项目、处理的功能性能要求*

### 2.2业务目标

### 2.3运行环境

*简要地说明对本系统的运行环境（包括硬件环境和支持环境）的规定*

#### 2.3.1设备 

*列出运行该软件所需要的硬设备。说明其中的新型设备及其专门功能。*

#### 2.3.2支持软件

*列出支持软件，包括要用到的操作系统、编译（或汇编）程序、测试支持软件等。*

### 2.4设计约束

### 2.5功能需求

*说明本系统的基本设计概念和处理流程，尽量使用图表的形式。*

### 2.6非功能需求

### 2.7系统总体架构

*用UML图和相应的文字介绍说明本系统的整体架构*

## 3 系统接口设计

### 3.2接口设计

#### 3.2.1用户接口

*说明将向用户提供的命令和它们的语法结构，以及软件的回答信息。*

*说明提供给用户操作的硬件控制面板的定义。*

#### 3.2.2 与其他软件、硬件接口

*说明本系统同外界的所有接口的安排包括软件与硬件之间的接口、本系统与各支持软件之间的接口关系以及各个系统元素之间的接口的安排。*

### 3.3 系统数据结构设计

#### 3.3.1 逻辑结构设计要点

*给出本系统内所使用的每个数据结构的名称、标识符以及它们之中每个数据项、记录、文卷和系的标识、定义、长度及它们之间的层次的或表格的相互关系。*

#### 3.3.2 物理结构设计要点

*给出本系统内所使用的每个数据结构中的每个数据项的存储要求，访问方法、存取单位、存取的物理关系（索引、设备、存储区域）、设计考虑和保密条件。*

#### 3.3.3数据结构与程序关系



## 4 系统数据库设计

本系统数据库采用 MySQL，数据类型设计兼顾了性能与扩展性，统一采用 BINARY(16) 存储主键，便于高并发、分布式下的主键管理。整体设计围绕用户购票、酒店预订、订餐及支付通知等核心业务展开，具有良好的可扩展性与一致性保障。

### 4.1 数据库总体设计
数据库名称：`swift_travel`

存储引擎：InnoDB

字符集：utf8mb4

主键设计：统一采用 UUID（BINARY(16) 压缩存储）

字段命名规范：小写字母+下划线，具有业务含义

逻辑删除字段：所有表均设置 `del TINYINT(1)` 字段标记逻辑删除

时间戳字段：重要表设置 `created_at`、`updated_time` 等记录操作时间

### 4.2 数据表设计

#### 4.2.1 用户表

用于存储系统用户的基本信息。

| 字段名    | 类型        | 描述           |
|-----------|-------------|----------------|
| id        | BINARY(16)   | 主键，用户ID    |
| username  | VARCHAR(50)  | 用户名，唯一    |
| password  | VARCHAR(255) | 密码（加密存储） |
| id_card   | VARCHAR(20)  | 身份证号        |
| phone     | VARCHAR(20)  | 手机号          |
| email     | VARCHAR(100) | 电子邮箱，唯一  |
| created_at| TIMESTAMP    | 注册时间        |
| del       | TINYINT(1)   | 删除标记（逻辑删除） |

#### 4.2.2 联系人表

记录用户常用联系人信息。

| 字段名    | 类型        | 描述           |
|-----------|-------------|----------------|
| contact_id| BINARY(16)   | 主键，联系人ID |
| user_id   | BINARY(16)   | 所属用户ID     |
| contact_name | VARCHAR(100) | 联系人姓名 |
| contact_phone| VARCHAR(20) | 联系人电话 |
| contact_email| VARCHAR(100) | 联系人邮箱 |
| created_at| TIMESTAMP    | 创建时间        |
| del       | TINYINT(1)   | 删除标记 |

#### 4.2.3 城市与车站表

**城市表（City）**

| 字段名    | 类型        | 描述           |
|-----------|-------------|----------------|
| id        | BINARY(16)   | 主键，城市ID   |
| city_name | VARCHAR(50)  | 城市名称       |
| del       | TINYINT(1)   | 删除标记       |

**车站表（Station）**

| 字段名    | 类型        | 描述           |
|-----------|-------------|----------------|
| id        | BINARY(16)   | 主键，车站ID   |
| station_name | VARCHAR(50) | 车站名称    |
| city_id   | BINARY(16)   | 所属城市ID     |
| del       | TINYINT(1)   | 删除标记       |

#### 4.2.4 车次及座位相关表

**车次表（TrainNumbers）**

| 字段名    | 类型        | 描述           |
|-----------|-------------|----------------|
| id        | BINARY(16)   | 主键，车次ID   |
| train_number | VARCHAR(10) | 车次编号    |
| dep_station  | VARCHAR(50) | 出发站      |
| dep_city     | VARCHAR(50) | 出发城市    |
| arr_station  | VARCHAR(50) | 到达站      |
| arr_city     | VARCHAR(50) | 到达城市    |
| dep_time     | DATETIME    | 出发时间    |
| arr_time     | DATETIME    | 到达时间    |
| del          | TINYINT(1)  | 删除标记    |

**车厢表（Carriages）**

| 字段名    | 类型        | 描述           |
|-----------|-------------|----------------|
| id        | BINARY(16)   | 主键，车厢ID   |
| train_number | BINARY(16) | 关联车次ID   |
| dep_station | VARCHAR(50) | 出发站       |
| dep_city    | VARCHAR(50) | 出发城市     |
| arr_station | VARCHAR(50) | 到达站       |
| arr_city    | VARCHAR(50) | 到达城市     |
| arr_time    | DATETIME    | 到达时间     |
| wait_time   | TIME        | 等待时间     |
| all_number  | INT         | 总座位数     |
| first_number| INT         | 一等座数     |
| second_number| INT        | 二等座数     |
| business_number| INT      | 商务座数     |
| no_seat_number| INT       | 无座数量     |
| del         | TINYINT(1)  | 删除标记     |

**座位表（Seats）**

| 字段名    | 类型        | 描述           |
|-----------|-------------|----------------|
| id        | BINARY(16)   | 主键，座位ID   |
| train_number | BINARY(16) | 所属车次ID   |
| coach     | INT          | 车厢号         |
| seat_type | VARCHAR(10)  | 座位类型       |
| price     | DECIMAL(10,2)| 价格           |
| flags     | BINARY(8)    | 座位状态       |
| version   | INT          | 乐观锁版本号   |
| del       | TINYINT(1)   | 删除标记       |

#### 4.2.5 酒店预订相关表

**酒店表（Hotel）**

| 字段名    | 类型        | 描述           |
|-----------|-------------|----------------|
| id        | BINARY(16)   | 主键，酒店ID   |
| name      | VARCHAR(50)  | 酒店名称       |
| address   | VARCHAR(50)  | 酒店地址       |
| rating    | DECIMAL(2,1) | 酒店评分       |
| description | VARCHAR(255) | 描述       |
| pic_url   | VARCHAR(255) | 图片URL        |
| del       | TINYINT(1)   | 删除标记       |

**房间表（Room）**

| 字段名    | 类型        | 描述           |
|-----------|-------------|----------------|
| id        | BINARY(16)   | 主键，房间ID   |
| hotel_id  | BINARY(16)   | 所属酒店ID     |
| room_type | VARCHAR(50)  | 房间类型       |
| price     | DECIMAL(10,2)| 房价           |
| room_date | DATE         | 房间日期       |
| availability | BOOLEAN   | 可用性         |
| del       | TINYINT(1)   | 删除标记       |

**预订表（Reservation）**

| 字段名    | 类型        | 描述           |
|-----------|-------------|----------------|
| id            | BINARY(16) | 主键，预订ID |
| user_id       | BINARY(16) | 用户ID        |
| hotel_id      | BINARY(16) | 酒店ID        |
| room_id       | BINARY(16) | 房间ID        |
| checkin_date  | DATE       | 入住日期      |
| checkout_date | DATE       | 离店日期      |
| status        | VARCHAR(50)| 预订状态      |
| booking_time  | TIMESTAMP  | 预订时间      |
| del           | TINYINT(1) | 删除标记      |

#### 4.2.6 食物相关表

**食品表（Food）**

| 字段名    | 类型        | 描述           |
|-----------|-------------|----------------|
| id        | BINARY(16)   | 主键，食品ID   |
| trains_id | BINARY(16)   | 所属车次ID     |
| food_name | VARCHAR(50)  | 食品名称       |
| food_type | VARCHAR(10)  | 食品类型       |
| price     | DECIMAL(10,2)| 价格           |
| lunch     | BOOLEAN      | 是否午餐       |
| dinner    | BOOLEAN      | 是否晚餐       |
| pic_url   | VARCHAR(255) | 图片URL        |
| del       | TINYINT(1)   | 删除标记       |

**食物订单及明细表（food_orders & food_order_items）**

- `food_orders`：存储食物订单基本信息
- `food_order_items`：存储每个订单中的食品项明细

#### 4.2.7 订单与支付相关表

**火车票订单表（tickets_orders）**

| 字段名    | 类型        | 描述           |
|-----------|-------------|----------------|
| id        | BINARY(16)   | 主键，订单ID   |
| pay_id    | BINARY(16)   | 支付ID         |
| user_id   | BINARY(16)   | 用户ID         |
| contacts_id | BINARY(16) | 联系人ID       |
| train_id  | BINARY(16)   | 车次ID         |
| seat_id   | BINARY(16)   | 座位ID         |
| del       | TINYINT(1)   | 删除标记       |

**酒店订单表（hotel_orders）**

| 字段名        | 类型          | 描述                  |
|---------------|---------------|-----------------------|
| id            | BINARY(16)     | 主键，订单ID          |
| pay_id        | BINARY(16)     | 支付ID                |
| user_id       | BINARY(16)     | 用户ID                |
| hotel_id      | BINARY(16)     | 酒店ID                |
| room_id       | BINARY(16)     | 房间ID                |
| checkin_date  | DATE           | 入住日期              |
| checkout_date | DATE           | 离店日期              |
| total_amount  | DECIMAL(10,2)  | 总价格                |
| order_time    | TIMESTAMP      | 下单时间              |
| status        | VARCHAR(20)    | 订单状态（如已预订、已取消） |
| del           | TINYINT(1)     | 删除标记              |

**食品订单表（food_orders）**

| 字段名        | 类型          | 描述                  |
|---------------|---------------|-----------------------|
| id            | BINARY(16)     | 主键，订单ID          |
| pay_id        | BINARY(16)     | 支付ID                |
| user_id       | BINARY(16)     | 用户ID                |
| food_total    | DECIMAL(10,2)  | 食品总金额            |
| train_id      | BINARY(16)     | 关联车次ID            |
| carriage_id   | BINARY(16)     | 关联车厢ID            |
| seat_id       | BINARY(16)     | 关联座位ID            |
| order_time    | TIMESTAMP      | 下单时间              |
| status        | VARCHAR(20)    | 订单状态（如已支付、已取消） |
| del           | TINYINT(1)     | 删除标记              |


**支付记录表（payment_records）**

| 字段名    | 类型        | 描述           |
|-----------|-------------|----------------|
| payment_id | BINARY(16)  | 主键，支付ID    |
| order_id   | BINARY(16)  | 关联订单ID      |
| user_id    | BINARY(16)  | 支付用户ID      |
| pay_type   | VARCHAR(20) | 购买对象类型    |
| amount     | DECIMAL(10,2)| 支付金额        |
| method     | VARCHAR(20) | 支付方式        |
| status     | VARCHAR(20) | 支付状态        |
| created_time | DATETIME  | 创建时间        |
| updated_time | DATETIME  | 更新时间        |
| del        | TINYINT(1)  | 删除标记        |

#### 4.2.8 消息通知表

用于系统通知消息管理。

| 字段名    | 类型        | 描述           |
|-----------|-------------|----------------|
| message_id| BINARY(16)   | 主键，消息ID   |
| user_id   | BINARY(16)   | 接收用户ID     |
| order_id  | BINARY(16)   | 关联订单ID（可空） |
| message_type | VARCHAR(20)| 消息类型      |
| content   | TEXT         | 消息内容       |
| channel   | VARCHAR(20)  | 发送渠道       |
| is_read   | BOOLEAN      | 是否已读       |
| send_status| VARCHAR(20) | 发送状态       |
| send_time | DATETIME     | 发送时间       |
| created_time| DATETIME   | 创建时间       |
| del       | TINYINT(1)   | 删除标记       |

### 4.3 数据库设计特点总结

- 采用 **UUID（BINARY(16)）** 作为主键，确保分布式场景下的数据唯一性与安全性；

- 所有表统一设置 `del` 字段，实现逻辑删除，保障数据可恢复性；

- 充分细化订单系统（票务、酒店、餐食），便于扩展和统一管理；

- 明确支付状态与消息通知流程，强化了系统的事务一致性设计；

- 预留了优化索引的空间，支持未来高并发访问和复杂查询。


## 5 运行设计

### 5.1运行模块组合

### 5.2运行控制

### 5.3运行时间







